

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/MHT1.0.webp">
  <link rel="icon" href="/img/MHT1.0.webp">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="mxy">
  <meta name="keywords" content="">
  
    <meta name="description" content="åœ°å€ï¼šhttps:&#x2F;&#x2F;leetcode-cn.com&#x2F;problems&#x2F;design-twitter&#x2F;  é¢˜ç›®è®¾è®¡ä¸€ä¸ªç®€åŒ–ç‰ˆçš„æ¨ç‰¹(Twitter)ï¼Œå¯ä»¥è®©ç”¨æˆ·å®ç°å‘é€æ¨æ–‡ï¼Œå…³æ³¨&#x2F;å–æ¶ˆå…³æ³¨å…¶ä»–ç”¨æˆ·ï¼Œèƒ½å¤Ÿçœ‹è§å…³æ³¨äººï¼ˆåŒ…æ‹¬è‡ªå·±ï¼‰çš„æœ€è¿‘åæ¡æ¨æ–‡ã€‚ä½ çš„è®¾è®¡éœ€è¦æ”¯æŒä»¥ä¸‹çš„å‡ ä¸ªåŠŸèƒ½ï¼š  postTweet(userId, tweetId): åˆ›å»ºä¸€æ¡æ–°çš„æ¨æ–‡ getNewsFeed(userId): æ£€ç´¢æœ€">
<meta property="og:type" content="article">
<meta property="og:title" content="Leetcode 355.è®¾è®¡æ¨ç‰¹ã€C++ã€‘">
<meta property="og:url" content="https://mxy493.xyz/2020041332657/index.html">
<meta property="og:site_name" content="è·‘èµ·æ¥æœ‰é£">
<meta property="og:description" content="åœ°å€ï¼šhttps:&#x2F;&#x2F;leetcode-cn.com&#x2F;problems&#x2F;design-twitter&#x2F;  é¢˜ç›®è®¾è®¡ä¸€ä¸ªç®€åŒ–ç‰ˆçš„æ¨ç‰¹(Twitter)ï¼Œå¯ä»¥è®©ç”¨æˆ·å®ç°å‘é€æ¨æ–‡ï¼Œå…³æ³¨&#x2F;å–æ¶ˆå…³æ³¨å…¶ä»–ç”¨æˆ·ï¼Œèƒ½å¤Ÿçœ‹è§å…³æ³¨äººï¼ˆåŒ…æ‹¬è‡ªå·±ï¼‰çš„æœ€è¿‘åæ¡æ¨æ–‡ã€‚ä½ çš„è®¾è®¡éœ€è¦æ”¯æŒä»¥ä¸‹çš„å‡ ä¸ªåŠŸèƒ½ï¼š  postTweet(userId, tweetId): åˆ›å»ºä¸€æ¡æ–°çš„æ¨æ–‡ getNewsFeed(userId): æ£€ç´¢æœ€">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-04-13T12:22:02.000Z">
<meta property="article:modified_time" content="2020-04-13T13:10:00.000Z">
<meta property="article:author" content="mxy">
<meta property="article:tag" content="Leetcode">
<meta property="article:tag" content="C++">
<meta name="twitter:card" content="summary_large_image">
  
  
  <title>Leetcode 355.è®¾è®¡æ¨ç‰¹ã€C++ã€‘ - è·‘èµ·æ¥æœ‰é£</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hint.css@2/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/atom-one-dark.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"mxy493.xyz","root":"/","version":"1.8.14","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":"â¡"},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"baidu":"18eea77ce9d69111f0e6183a0f1e0f98","google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"zSgOiL44PrWh3aIEYyAkhNIx-gzGzoHsz","app_key":"iNppU37sPwRdpmjgAsJ3dgnC","server_url":"https://leancloud.mxy.cool","path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.1"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>è·‘èµ·æ¥æœ‰é£</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                å‹é“¾
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/xqmy.webp') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Leetcode 355.è®¾è®¡æ¨ç‰¹ã€C++ã€‘">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2020-04-13 20:22" pubdate>
        2020å¹´4æœˆ13æ—¥ æ™šä¸Š
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      5k å­—
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      16 åˆ†é’Ÿ
    </span>
  

  
  
    
      <!-- ä¸è’œå­ç»Ÿè®¡æ–‡ç« PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> æ¬¡
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Leetcode 355.è®¾è®¡æ¨ç‰¹ã€C++ã€‘</h1>
            
              <p class="note note-info">
                
                  æœ¬æ–‡æœ€åæ›´æ–°äºï¼š2020å¹´4æœˆ13æ—¥ æ™šä¸Š
                
              </p>
            
            <div class="markdown-body">
              <blockquote>
<p>åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/design-twitter/">https://leetcode-cn.com/problems/design-twitter/</a></p>
</blockquote>
<h3 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h3><p>è®¾è®¡ä¸€ä¸ªç®€åŒ–ç‰ˆçš„æ¨ç‰¹(Twitter)ï¼Œå¯ä»¥è®©ç”¨æˆ·å®ç°å‘é€æ¨æ–‡ï¼Œå…³æ³¨/å–æ¶ˆå…³æ³¨å…¶ä»–ç”¨æˆ·ï¼Œèƒ½å¤Ÿçœ‹è§å…³æ³¨äººï¼ˆåŒ…æ‹¬è‡ªå·±ï¼‰çš„æœ€è¿‘åæ¡æ¨æ–‡ã€‚ä½ çš„è®¾è®¡éœ€è¦æ”¯æŒä»¥ä¸‹çš„å‡ ä¸ªåŠŸèƒ½ï¼š</p>
<ol>
<li><code>postTweet(userId, tweetId)</code>: åˆ›å»ºä¸€æ¡æ–°çš„æ¨æ–‡</li>
<li><code>getNewsFeed(userId)</code>: æ£€ç´¢æœ€è¿‘çš„åæ¡æ¨æ–‡ã€‚æ¯ä¸ªæ¨æ–‡éƒ½å¿…é¡»æ˜¯ç”±æ­¤ç”¨æˆ·å…³æ³¨çš„äººæˆ–è€…æ˜¯ç”¨æˆ·è‡ªå·±å‘å‡ºçš„ã€‚æ¨æ–‡å¿…é¡»æŒ‰ç…§æ—¶é—´é¡ºåºç”±æœ€è¿‘çš„å¼€å§‹æ’åºã€‚</li>
<li><code>follow(followerId, followeeId)</code>: å…³æ³¨ä¸€ä¸ªç”¨æˆ·</li>
<li><code>unfollow(followerId, followeeId)</code>: å–æ¶ˆå…³æ³¨ä¸€ä¸ªç”¨æˆ·</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<div class="hljs code-wrapper"><pre><code class="hljs awk">Twitter twitter = new Twitter();

<span class="hljs-regexp">//</span> ç”¨æˆ·<span class="hljs-number">1</span>å‘é€äº†ä¸€æ¡æ–°æ¨æ–‡ (ç”¨æˆ·id = <span class="hljs-number">1</span>, æ¨æ–‡id = <span class="hljs-number">5</span>).
twitter.postTweet(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>);

<span class="hljs-regexp">//</span> ç”¨æˆ·<span class="hljs-number">1</span>çš„è·å–æ¨æ–‡åº”å½“è¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªidä¸º<span class="hljs-number">5</span>çš„æ¨æ–‡.
twitter.getNewsFeed(<span class="hljs-number">1</span>);

<span class="hljs-regexp">//</span> ç”¨æˆ·<span class="hljs-number">1</span>å…³æ³¨äº†ç”¨æˆ·<span class="hljs-number">2</span>.
twitter.follow(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);

<span class="hljs-regexp">//</span> ç”¨æˆ·<span class="hljs-number">2</span>å‘é€äº†ä¸€ä¸ªæ–°æ¨æ–‡ (æ¨æ–‡id = <span class="hljs-number">6</span>).
twitter.postTweet(<span class="hljs-number">2</span>, <span class="hljs-number">6</span>);

<span class="hljs-regexp">//</span> ç”¨æˆ·<span class="hljs-number">1</span>çš„è·å–æ¨æ–‡åº”å½“è¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªæ¨æ–‡ï¼Œidåˆ†åˆ«ä¸º -&gt; [<span class="hljs-number">6</span>, <span class="hljs-number">5</span>].
<span class="hljs-regexp">//</span> æ¨æ–‡id6åº”å½“åœ¨æ¨æ–‡id5ä¹‹å‰ï¼Œå› ä¸ºå®ƒæ˜¯åœ¨<span class="hljs-number">5</span>ä¹‹åå‘é€çš„.
twitter.getNewsFeed(<span class="hljs-number">1</span>);

<span class="hljs-regexp">//</span> ç”¨æˆ·<span class="hljs-number">1</span>å–æ¶ˆå…³æ³¨äº†ç”¨æˆ·<span class="hljs-number">2</span>.
twitter.unfollow(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);

<span class="hljs-regexp">//</span> ç”¨æˆ·<span class="hljs-number">1</span>çš„è·å–æ¨æ–‡åº”å½“è¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªidä¸º<span class="hljs-number">5</span>çš„æ¨æ–‡.
<span class="hljs-regexp">//</span> å› ä¸ºç”¨æˆ·<span class="hljs-number">1</span>å·²ç»ä¸å†å…³æ³¨ç”¨æˆ·<span class="hljs-number">2</span>.
twitter.getNewsFeed(<span class="hljs-number">1</span>);</code></pre></div>

<h3 id="è§£é¢˜æ€è·¯"><a href="#è§£é¢˜æ€è·¯" class="headerlink" title="è§£é¢˜æ€è·¯"></a>è§£é¢˜æ€è·¯</h3><p>é¦–å…ˆï¼Œæˆ‘å†™äº†ä¸€ä¸ªå¤šå°æ—¶å†™å‡ºæ¥ï¼Œä½†æ˜¯è¶…æ—¶äº†ï¼Œå¾ˆå°´å°¬~</p>
<p>è¿˜æ˜¯ç•™ä¸‹æˆ‘çš„è§£é¢˜æ€è·¯ã€‚</p>
<p>æ ¹æ®é¢˜ç›®è¦æ±‚ï¼Œæˆ‘ä»¬çŸ¥é“è¦ä¿å­˜æ¯ä¸€æ¡æ¨æ–‡åŠå…¶å‘å¸ƒè€…ï¼Œå®šä¹‰äº†ä¸€ä¸ª <code>vector&lt;pair&lt;int, int&gt;&gt;</code> ç±»å‹çš„æ•°ç»„ <code>tweets</code> ç”¨äºå­˜å‚¨æˆå¯¹çš„ <code>userID</code> å’Œ <code>tweetID</code>ï¼Œå¹¶ä¸”é¢˜ç›®è¦æ±‚æ£€ç´¢æœ€è¿‘çš„10æ¡æ¨æ–‡ï¼Œæ‰€ä»¥å‘å¸ƒçš„æ—¶å€™æˆ‘ä»¬å°±é¡ºåºå­˜å‚¨æ¯ä¸€æ¡æ¨æ–‡ï¼Œè¿™æ ·é¿å…äº†æ¯æ¬¡æ£€ç´¢éƒ½è¦å¯¹æ¨æ–‡è¿›è¡Œæ’åºï¼›å¦å¤–è¿˜éœ€è¦å¯¹åº”æ¯ä¸€ä¸ªç”¨æˆ·è¦å­˜å‚¨è¯¥ç”¨æˆ·æ‰€å…³æ³¨çš„ç”¨æˆ·ï¼Œè€ƒè™‘æ¯ä¸€ä¸ªç”¨æˆ·å…³æ³¨çš„ç”¨æˆ·IDéƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©ç”¨é›†åˆæ¥å­˜å‚¨æ¯ä¸€ä¸ªç”¨æˆ·å…³æ³¨çš„ç”¨æˆ·ï¼Œå®šä¹‰äº†ä¸€ä¸ª <code>vector&lt;pair&lt;int, set&lt;int&gt;&gt;&gt;</code> ç±»å‹çš„æ•°ç»„ <code>users</code> ï¼Œå­˜å‚¨æ‰€æœ‰ç”¨æˆ·çš„ç”¨æˆ·IDåŠå…¶å¯¹åº”çš„å…³æ³¨çš„ç”¨æˆ·çš„é›†åˆã€‚</p>
<h4 id="ï¼ˆ1ï¼‰å‘æ¨"><a href="#ï¼ˆ1ï¼‰å‘æ¨" class="headerlink" title="ï¼ˆ1ï¼‰å‘æ¨"></a>ï¼ˆ1ï¼‰å‘æ¨</h4><p>é¦–å…ˆç›´æ¥å°†éœ€è¦å‘å¸ƒçš„æ¨æ–‡åŠå…¶å‘å¸ƒè€…åŠ å…¥åˆ° <code>tweets</code> çš„æœ«å°¾ï¼Œç„¶ååˆ¤æ–­å‘å¸ƒè¯¥æ¨æ–‡çš„ç”¨æˆ·æ˜¯å¦å·²å­˜åœ¨ä¸ç”¨æˆ·æ•°ç»„ <code>users</code> ï¼Œå¦‚æœå·²å­˜åœ¨åˆ™ä¸åšå¤„ç†ï¼Œå¦åˆ™å°†è¯¥ç”¨æˆ·åŠ å…¥åˆ°ç”¨æˆ·æ•°ç»„ã€‚</p>
<h4 id="ï¼ˆ2ï¼‰æ£€ç´¢æœ€è¿‘10æ¡æ¨æ–‡"><a href="#ï¼ˆ2ï¼‰æ£€ç´¢æœ€è¿‘10æ¡æ¨æ–‡" class="headerlink" title="ï¼ˆ2ï¼‰æ£€ç´¢æœ€è¿‘10æ¡æ¨æ–‡"></a>ï¼ˆ2ï¼‰æ£€ç´¢æœ€è¿‘10æ¡æ¨æ–‡</h4><p>åˆ¤æ–­ä¼ å…¥çš„ç”¨æˆ·IDæ˜¯å¦å­˜åœ¨ï¼Œè‹¥ä¸å­˜åœ¨è¯¥IDçš„ç”¨æˆ·ï¼Œåˆ™ç›´æ¥è¿”å›ç©ºæ•°ç»„ã€‚</p>
<p>å¦åˆ™ä»åå¾€å‰éå†æ¨æ–‡æ•°ç»„ <code>tweets</code> ï¼Œå®šä¹‰ä¸€ä¸ªæ•´å‹ <code>count</code> ç”¨äºè®¡æ•°å·²æ‰¾åˆ°çš„ç¬¦åˆè¦æ±‚çš„æ¨æ–‡æ•°é‡ï¼Œéå†ç»“æŸçš„æ¡ä»¶å³å·²æ£€ç´¢åˆ°çš„æ¨æ–‡æ•°é‡ <code>count</code> è¾¾åˆ°10æ¡æˆ–è€…å·²éå†å®Œæ•´ä¸ªæ¨æ–‡æ•°ç»„ã€‚å¯¹éå†åˆ°çš„æ¯ä¸€ä¸ªæ¨æ–‡ï¼Œåˆ¤æ–­å…¶å¯¹åº”çš„å‘å¸ƒè€…IDæ˜¯å¦å°±æ˜¯è¦æ£€ç´¢çš„ç”¨æˆ·IDæˆ–è€…è¯¥ç”¨æˆ·æ‰€å…³æ³¨çš„æŸä¸ªç”¨æˆ·çš„IDï¼Œè‹¥æ˜¯ï¼Œå°†è¯¥æ¨æ–‡åŠ å…¥è¿”å›æ•°ç»„ï¼Œ<code>count++</code> ï¼Œå¦åˆ™ç»§ç»­éå†ã€‚</p>
<h4 id="ï¼ˆ3ï¼‰å…³æ³¨"><a href="#ï¼ˆ3ï¼‰å…³æ³¨" class="headerlink" title="ï¼ˆ3ï¼‰å…³æ³¨"></a>ï¼ˆ3ï¼‰å…³æ³¨</h4><p>éå†ç”¨æˆ·æ•°ç»„æŸ¥æ‰¾è¯¥ç”¨æˆ·ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œåˆ™å°†å…¶è¦å…³æ³¨çš„ç”¨æˆ·åŠ å…¥åˆ°å…³æ³¨çš„ç”¨æˆ·é›†åˆç§ï¼›å¦åˆ™å…ˆå°†è¯¥ç”¨æˆ·åŠ å…¥åˆ°ç”¨æˆ·æ•°ç»„ï¼Œå†å°†è¦å…³æ³¨çš„ç”¨æˆ·IDåŠ å…¥åˆ°å…³æ³¨çš„ç”¨æˆ·é›†åˆã€‚</p>
<h4 id="ï¼ˆ4ï¼‰å–å…³"><a href="#ï¼ˆ4ï¼‰å–å…³" class="headerlink" title="ï¼ˆ4ï¼‰å–å…³"></a>ï¼ˆ4ï¼‰å–å…³</h4><p>éå†ç”¨æˆ·æ•°ç»„æŸ¥æ‰¾è¯¥ç”¨æˆ·ï¼Œè‹¥æ‰¾åˆ°ï¼Œåˆ™å°†è¦å–å…³çš„ç”¨æˆ·ä»å…³æ³¨çš„ç”¨æˆ·é›†åˆä¸­åˆ é™¤ï¼ŒåŒæ—¶ç»“æŸå‡½æ•°ã€‚</p>
<h4 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="# ä¼˜åŒ–"></a># ä¼˜åŒ–</h4><p>ä¼˜åŒ–è¿™éƒ¨åˆ†æ˜¯åé¢æ”¹è¿‡çš„ï¼Œè™½ç„¶è¿˜æ˜¯å¾ˆè€—æ—¶å¹¶ä¸”å†…å­˜æ¶ˆè€—ä¹Ÿå¤§ï¼Œä¸è¿‡å¥½æ­¹é€šè¿‡äº†ã€‚</p>
<ul>
<li>æ‰§è¡Œç”¨æ—¶ :1648 ms, åœ¨æ‰€æœ‰ C++ æäº¤ä¸­å‡»è´¥äº†5.15%çš„ç”¨æˆ·</li>
<li>å†…å­˜æ¶ˆè€— :189.6 MB, åœ¨æ‰€æœ‰ C++ æäº¤ä¸­å‡»è´¥äº†16.67%çš„ç”¨æˆ·</li>
</ul>
<p>å…¶å®å°±æ˜¯æœ€å¼€å§‹çš„ä»£ç åœ¨ç´¢å¼•çš„é‚£ä¸€éƒ¨åˆ†ï¼Œæˆ‘é¦–å…ˆéå†äº†ä¸€æ¬¡ç”¨æˆ·æ•°ç»„åˆ¤æ–­è¯¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå‡½æ•°ç›´æ¥ç»“æŸäº†é‚£å€’æ²¡ä»€ä¹ˆå½±å“ã€‚ä½†å¦‚æœå­˜åœ¨çš„è¯ï¼Œåç»­å¯¹æ¯ä¸€æ¡æ¨æ–‡ï¼Œæˆ‘éƒ½è¿˜è¦å†éå†ä¸€æ¬¡å»æ‰¾è¿™ä¸ªç”¨æˆ·ï¼Œå¦‚æœéå†äº† n æ¡æ¨æ–‡ï¼Œé‚£ä¹ˆå°±ä¼šåš <code>n + 1</code> æ¬¡å®Œå…¨é‡å¤çš„éå†æŸ¥æ‰¾ï¼Œæ˜¾ç„¶è¿™æ˜¯æ²¡æœ‰å¿…è¦çš„ã€‚</p>
<p>æ‰€æœ‰æˆ‘å°†åˆ¤æ–­è¯¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨çš„æ ‡å¿—æ”¹ä¸ºäº†æ•´å‹ <code> index</code> å¹¶åˆå§‹åŒ–ä¸º <code>-1</code> ï¼Œå³è¡¨ç¤ºè¯¥ç”¨æˆ·ä¸å­˜åœ¨ï¼Œå¦‚æœæ‰¾åˆ°äº†è¯¥ç”¨æˆ·ï¼Œåˆ™å°† <code>index</code> ä¿®æ”¹ä¸ºè¯¥ç”¨æˆ·åœ¨ç”¨æˆ·æ•°ç»„ä¸­çš„ä½ç½®ï¼Œåç»­å°±ä¸å†éœ€è¦éå†ç”¨æˆ·æ•°ç»„å»æŸ¥æ‰¾è¯¥ç”¨æˆ·äº†ã€‚</p>
<p>æˆ‘å°†ä¼˜åŒ–éƒ¨åˆ†çš„ä»£ç æ”¾åˆ°äº†ğŸ‘‡ğŸ»æœ€åé¢ğŸ‘‡ğŸ»</p>
<h3 id="ä»£ç ï¼ˆè¶…æ—¶ï¼‰"><a href="#ä»£ç ï¼ˆè¶…æ—¶ï¼‰" class="headerlink" title="ä»£ç ï¼ˆè¶…æ—¶ï¼‰"></a>ä»£ç ï¼ˆè¶…æ—¶ï¼‰</h3><h4 id="åŸå§‹ä»£ç ï¼ˆæœªä¼˜åŒ–ï¼‰"><a href="#åŸå§‹ä»£ç ï¼ˆæœªä¼˜åŒ–ï¼‰" class="headerlink" title="åŸå§‹ä»£ç ï¼ˆæœªä¼˜åŒ–ï¼‰"></a>åŸå§‹ä»£ç ï¼ˆæœªä¼˜åŒ–ï¼‰</h4><div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Twitter</span> &#123;
    vector&lt;pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;&gt; tweets;<span class="hljs-comment">//æ‰€æœ‰æ¨æ–‡</span>
    vector&lt;pair&lt;<span class="hljs-type">int</span>, set&lt;<span class="hljs-type">int</span>&gt;&gt;&gt; users;<span class="hljs-comment">//æ‰€æœ‰ç”¨æˆ·åŠå…¶å…³æ³¨çš„ç”¨æˆ·</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">/** Initialize your data structure here. */</span>
    <span class="hljs-built_in">Twitter</span>() &#123;

    &#125;

    <span class="hljs-comment">/** Compose a new tweet. */</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">postTweet</span><span class="hljs-params">(<span class="hljs-type">int</span> userId, <span class="hljs-type">int</span> tweetId)</span> </span>&#123;
        <span class="hljs-comment">//åŠ å…¥æ¨æ–‡æ•°ç»„</span>
        tweets.<span class="hljs-built_in">push_back</span>(&#123; userId,tweetId &#125;);
        <span class="hljs-comment">//åˆ¤æ–­è¯¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> user : users) &#123;
            <span class="hljs-keyword">if</span> (user.first == userId) &#123;
                <span class="hljs-keyword">return</span>;<span class="hljs-comment">//å¦‚æœç”¨æˆ·å­˜åœ¨ï¼Œå‡½æ•°å°†åœ¨è¿™é‡Œç»“æŸ</span>
            &#125;
        &#125;
        <span class="hljs-comment">//å‡½æ•°æ‰§è¡Œåˆ°è¿™é‡Œè¯´æ˜ç”¨æˆ·ä¸å­˜åœ¨ï¼Œå°†ç”¨æˆ·åŠ å…¥åˆ°ç”¨æˆ·åˆ—è¡¨</span>
        users.<span class="hljs-built_in">push_back</span>(&#123; userId,&#123;&#125; &#125;);
    &#125;

    <span class="hljs-comment">/** Retrieve the 10 most recent tweet ids in the user&#x27;s news feed. Each item in the news feed must be posted by users who the user followed or by the user herself. Tweets must be ordered from most recent to least recent. */</span>
    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">getNewsFeed</span><span class="hljs-params">(<span class="hljs-type">int</span> userId)</span> </span>&#123;
        vector&lt;<span class="hljs-type">int</span>&gt; ans;
        <span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦å­˜åœ¨è¯¥idçš„ç”¨æˆ·</span>
        <span class="hljs-type">bool</span> exist = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> user : users) &#123;
            <span class="hljs-keyword">if</span> (userId == user.first) &#123;
                exist = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">break</span>;
            &#125;
        &#125;
        <span class="hljs-comment">//ä¸å­˜åœ¨ç›´æ¥è¿”å›ç©ºæ•°ç»„</span>
        <span class="hljs-keyword">if</span> (exist == <span class="hljs-literal">false</span>) &#123;
            <span class="hljs-keyword">return</span> ans;
        &#125;
        <span class="hljs-type">int</span> amount = tweets.<span class="hljs-built_in">size</span>();
        <span class="hljs-type">int</span> count = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; count &lt; <span class="hljs-number">10</span> &amp;&amp; i &lt; tweets.<span class="hljs-built_in">size</span>(); i++) &#123;
            <span class="hljs-keyword">if</span> (tweets[amount - i - <span class="hljs-number">1</span>].first == userId || <span class="hljs-built_in">isFollowing</span>(userId, tweets[amount - i - <span class="hljs-number">1</span>].first)) &#123;
                ans.<span class="hljs-built_in">push_back</span>(tweets[amount - i - <span class="hljs-number">1</span>].second);
                count++;
            &#125;
        &#125;
        <span class="hljs-keyword">return</span> ans;
    &#125;

    <span class="hljs-comment">// id1æ˜¯å¦å…³æ³¨äº†id2</span>
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">isFollowing</span><span class="hljs-params">(<span class="hljs-type">int</span> id1, <span class="hljs-type">int</span> id2)</span> </span>&#123;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; users.<span class="hljs-built_in">size</span>(); i++) &#123;
            <span class="hljs-keyword">if</span> (users[i].first == id1 &amp;&amp; users[i].second.<span class="hljs-built_in">find</span>(id2) != users[i].second.<span class="hljs-built_in">end</span>()) &#123;
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            &#125;
        &#125;
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    &#125;

    <span class="hljs-comment">/** Follower follows a followee. If the operation is invalid, it should be a no-op. */</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">follow</span><span class="hljs-params">(<span class="hljs-type">int</span> followerId, <span class="hljs-type">int</span> followeeId)</span> </span>&#123;
        <span class="hljs-type">bool</span> exist = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; users.<span class="hljs-built_in">size</span>(); i++) &#123;
            <span class="hljs-keyword">if</span> (followerId == users[i].first) &#123;
                exist = <span class="hljs-literal">true</span>;
                users[i].second.<span class="hljs-built_in">insert</span>(followeeId);
                <span class="hljs-keyword">return</span>;
            &#125;
        &#125;
        <span class="hljs-keyword">if</span> (exist == <span class="hljs-literal">false</span>) &#123;
            users.<span class="hljs-built_in">push_back</span>(&#123; followerId,&#123;&#125; &#125;);
            users[users.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>].second.<span class="hljs-built_in">insert</span>(followeeId);
        &#125;
    &#125;

    <span class="hljs-comment">/** Follower unfollows a followee. If the operation is invalid, it should be a no-op. */</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">unfollow</span><span class="hljs-params">(<span class="hljs-type">int</span> followerId, <span class="hljs-type">int</span> followeeId)</span> </span>&#123;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; users.<span class="hljs-built_in">size</span>(); i++) &#123;
            <span class="hljs-keyword">if</span> (followerId == users[i].first) &#123;
                users[i].second.<span class="hljs-built_in">erase</span>(followeeId);
                <span class="hljs-keyword">return</span>;
            &#125;
        &#125;
    &#125;
&#125;;

<span class="hljs-comment">/**</span>
<span class="hljs-comment"> * Your Twitter object will be instantiated and called as such:</span>
<span class="hljs-comment"> * Twitter* obj = new Twitter();</span>
<span class="hljs-comment"> * obj-&gt;postTweet(userId,tweetId);</span>
<span class="hljs-comment"> * vector&lt;int&gt; param_2 = obj-&gt;getNewsFeed(userId);</span>
<span class="hljs-comment"> * obj-&gt;follow(followerId,followeeId);</span>
<span class="hljs-comment"> * obj-&gt;unfollow(followerId,followeeId);</span>
<span class="hljs-comment"> */</span></code></pre></div>

<h4 id="ä¼˜åŒ–éƒ¨åˆ†"><a href="#ä¼˜åŒ–éƒ¨åˆ†" class="headerlink" title="ä¼˜åŒ–éƒ¨åˆ†"></a>ä¼˜åŒ–éƒ¨åˆ†</h4><p>å¯¹å‡½æ•° <code>getNewsFeed(int userId)</code> è¿›è¡Œäº†ä¿®æ”¹ï¼Œå¹¶åˆ é™¤äº†å‡½æ•° <code>isFollowing(int id1, int id2)</code>ã€‚</p>
<div class="hljs code-wrapper"><pre><code class="hljs c++"><span class="hljs-comment">/** Retrieve the 10 most recent tweet ids in the user&#x27;s news feed. Each item in the news feed must be posted by users who the user followed or by the user herself. Tweets must be ordered from most recent to least recent. */</span>
<span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">getNewsFeed</span><span class="hljs-params">(<span class="hljs-type">int</span> userId)</span> </span>&#123;
    vector&lt;<span class="hljs-type">int</span>&gt; ans;
    <span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦å­˜åœ¨è¯¥idçš„ç”¨æˆ·</span>
    <span class="hljs-type">bool</span> exist = <span class="hljs-literal">false</span>;
    <span class="hljs-type">int</span> index = <span class="hljs-number">-1</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; users.<span class="hljs-built_in">size</span>(); i++) &#123;
        <span class="hljs-keyword">if</span> (userId == users[i].first) &#123;
            index = i;
            <span class="hljs-keyword">break</span>;
        &#125;
    &#125;
    <span class="hljs-comment">//ä¸å­˜åœ¨ç›´æ¥è¿”å›ç©ºæ•°ç»„</span>
    <span class="hljs-keyword">if</span> (index == <span class="hljs-number">-1</span>) &#123;
        <span class="hljs-keyword">return</span> ans;
    &#125;
    <span class="hljs-type">int</span> amount = tweets.<span class="hljs-built_in">size</span>();
    <span class="hljs-type">int</span> count = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; count &lt; <span class="hljs-number">10</span> &amp;&amp; i &lt; tweets.<span class="hljs-built_in">size</span>(); i++) &#123;
        <span class="hljs-type">int</span> cur = tweets[amount - i - <span class="hljs-number">1</span>].first;
        <span class="hljs-keyword">if</span> (cur == userId || users[index].second.<span class="hljs-built_in">find</span>(cur) != users[index].second.<span class="hljs-built_in">end</span>()) &#123;
            ans.<span class="hljs-built_in">push_back</span>(tweets[amount - i - <span class="hljs-number">1</span>].second);
            count++;
        &#125;
    &#125;
    <span class="hljs-keyword">return</span> ans;
&#125;</code></pre></div>


            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Leetcode/">Leetcode</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Leetcode/">Leetcode</a>
                    
                      <a class="hover-with-bg" href="/tags/C/">C++</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    æœ¬ç«™æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2020041557008/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">2020.04.15 ç¾å›¢ç‚¹è¯„ä¸€é¢ã€å‰ç«¯ã€‘</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020041016643/">
                        <span class="hidden-mobile">Leetcode 151.ç¿»è½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯ã€C++ã€‘</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- ä¸è’œå­ç»Ÿè®¡PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            æ€»è®¿é—®é‡ 
            <span id="busuanzi_value_site_pv"></span>
             æ¬¡
          </span>
      
      
        <!-- ä¸è’œå­ç»Ÿè®¡UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            æ€»è®¿å®¢æ•° 
            <span id="busuanzi_value_site_uv"></span>
             äºº
          </span>
      
    
  </div>


  
  <!-- å¤‡æ¡ˆä¿¡æ¯ -->
  <div class="beian">
    <span>
      <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
        äº¬ICPå¤‡2021034122å·-1
      </a>
    </span>
    
  </div>


  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>


  <script defer src="/js/leancloud.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
        typing(title);
      
    })(window, document);
  </script>












  
    <!-- Baidu Analytics -->
    <script defer>
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?18eea77ce9d69111f0e6183a0f1e0f98";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  

  

  

  

  





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ ä¿æŒåœ¨æœ€åº•éƒ¨ -->
<script  src="/js/boot.js" ></script>


</body>
</html>
